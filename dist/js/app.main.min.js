var mode="test",app=app||{};app.main=function(){"use strict";var e={init:function(){console.log("main init"),app.service.init(),app.share.init(),$("section").append(e.getTemplate("example",{data:"Hurray!"}))},load:function(e){app.service.load(function(e){console.log(e)},function(e){console.error("There was a problem connecting to the remote service. Please try again later.")})},checkHash:function(){var e=window.location.hash.substr(1).toLowerCase();switch(e){case"/":case"":}},track:function(e,t){"undefined"!=typeof ga&&(ga("send","event",e,t),console.log("Track: "+e+", "+t))},getTemplate:function(e,t){var o=$("#template-"+e).html(),n=Handlebars.compile(o);return n(t)}};return e}(),app.share=function(){var e={local:"http://test.example.com/",test:"http://test.example.com/",live:"https://www.example.com/"},t={local:"190694681013454",test:"",live:""},o={init:function(){$(".share.facebook").off("click").on("click",function(){app.share.shareFacebook({description:"Facebook share description",caption:"example.com"})}),$(".share.twitter").off("click").on("click",function(){app.share.shareTwitter({twitter:"Twitter share description",hashtags:"hashtag"})})},initFacebook:function(){FB.init({appId:t[mode],xfbml:!0,version:"v2.4"})},shareFacebook:function(t){var o={method:"feed",link:e[mode],name:"Web Template",description:t.description};void 0==t.picture?o.picture=e[mode]+"img/share-facebook.png":o.picture=t.picture,void 0!==t.caption&&(o.caption=t.caption),FB.ui(o,function(e){})},shareTwitter:function(t){void 0==t.hashtags&&(t.hashtags="");var o=500,n=443,a=screen.height/2-n/2,i=screen.width/2-o/2,c="toolbar=no,menubar=no,scrollbars=no,statusbar=no,width="+o+",height="+n+",top="+a+",left="+i,r=window.open("https://twitter.com/intent/tweet?url="+encodeURIComponent(e[mode])+"&text="+encodeURIComponent(t.twitter)+"&hashtags="+encodeURIComponent(t.hashtags),"twittershare",c);r.focus()}};return o}(),app.service=function(){"use strict";var e={local:"",test:"",live:""},t={init:function(){switch(location.hostname){case"localhost":mode="local";break;case"test.example.com":mode="test";break;case"www.example.com":mode="live"}console.log("Mode: "+mode)},load:function(t,o){$.getJSON(e[mode]).done(function(e){"function"==typeof t&&t(e)}).fail(function(t){console.error("Error connecting to service endpoint: "+e[mode]),"function"==typeof o&&o(t)})}};return t}(),$(function(){app.main.init()});